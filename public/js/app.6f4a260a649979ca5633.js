webpackJsonp([1],{"0him":function(t,s){},"6Lm9":function(t,s){},K6wR:function(t,s){},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("qRXP"),a=e("3cXf"),o=e.n(a),n=e("rVsN"),r=e.n(n),l=e("2sCs"),c=e.n(l),h=e("DEjr"),u=e.n(h),d=e("6yg2"),m=e.n(d),_={strtoJson:function(t){var s=new RegExp("=","g"),e=new RegExp("\\&","g");if(t='{"'+t+'"}',-1!==(t=t.replace(s,'":"').replace(e,'","')).indexOf("undefined"))return!1;return JSON.parse(t)},iscroll:function(t){window.onscroll=function(){(function(){var t=0;if(document.documentElement&&document.documentElement.scrollTop?t=document.documentElement.scrollTop:document.body&&(t=document.body.scrollTop),0!==t)return t})()+(document.body.clientHeight&&document.documentElement.clientHeight?Math.min(document.body.clientHeight,document.documentElement.clientHeight):Math.max(document.body.clientHeight,document.documentElement.clientHeight))===Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)&&t()}},btnClickLimit:function(t){var s=new Date,e=1e3;void 0!==localStorage.getItem("btnClickTime")&&(e=s.getTime()-Number(localStorage.getItem("btnClickTime"))),e>=500?(t(!0),localStorage.setItem("btnClickTime",s.getTime())):t(!1)},isWeiXin:function(){return"micromessenger"==window.navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},isAlipay:function(){return"alipay"==window.navigator.userAgent.toLowerCase().match(/alipay/i)},startSDK:function(t,s){this.isWeiXin()&&(wx.config({appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:t.jsApiList}),wx.error(function(t){}),wx.ready(function(){s()})),this.isAlipay()&&s()},scan:function(t){var s="";this.isWeiXin()&&wx.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(e){s=e.resultStr,t(s)},error:function(t){console.log("error:"+t)}}),this.isAlipay()&&document.addEventListener("AlipayJSBridgeReady",function(){-1===navigator.userAgent.indexOf("AlipayClient")||(Ali.alipayVersion.slice(0,3)>=8.1?Ali.scan({type:"qr"},function(s){s.errorCode||(s=s.qrCode,t(s))}):Ali.alert({title:"亲",message:"请升级您的钱包到最新版",button:"确定"}))},!1)},pay:function(t,s){console.log("开始调用支付sdk"),this.isWeiXin()&&wx.chooseWXPay({timestamp:t.jsApiParameters.timestamp,nonceStr:t.jsApiParameters.nonceStr,package:t.jsApiParameters.package,signType:t.jsApiParameters.signType,paySign:t.jsApiParameters.paySign,success:function(t){s()}}),this.isAlipay()&&s(t.jsApiParameters)},locationFn_browser:function(t){this.isWeiXin()?wx.getLocation({type:"wgs84",success:function(s){t(s)},cancel:function(){t()}}):this.isAlipay()&&AlipayJSBridge.call("getCurrentLocation",{bizType:"didi"},function(s){s.error?t():t(s)})},CloseWindow:function(){this.isWeiXin()&&WeixinJSBridge.invoke("closeWindow",{},function(t){t.err_msg}),this.isAlipay()&&AlipayJSBridge.call("exitApp")},setCookie:function(t,s,e){var i=new Date;i.setTime(i.getTime()+60*e*1e3),document.cookie=t+"="+escape(s)+";expires="+i.toGMTString()},getCookie:function(t){var s=void 0,e=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(s=document.cookie.match(e))?unescape(s[2]):null},delCookie:function(t){var s=new Date;s.setTime(s.getTime()-6e4),document.cookie=t+"=v; expires="+s.toGMTString()}};c.a.defaults.timeout=5e3,c.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",c.a.defaults.headers.get["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8";var w=window.location.href.split("user")[0];c.a.defaults.baseURL=w,c.a.interceptors.request.use(function(t){return"post"===t.method&&(t.data=u.a.stringify(t.data)),t},function(t){return r.a.reject(t)});var g={ceshi_jsonp:function(t,s){return p(t,s,null)},order_status:function(t){return f("api/platform/order_status","post",t)},get_stationInfo:function(t){return f("api/platform/get_station_info","post",t)},paydirect:function(t){return f("api/platform/borrow","post",t)},get_oauth_url:function(t){return f("api/platform/get_oauth_url ","post",t)},get_wechat_jsapi:function(t){return f("api/platform/get_wechat_jsapi","post",t)}};c.a.interceptors.response.use(function(t){var s="";return 5===t.data.code?(_.isWeiXin()?s=0:_.isAlipay()&&(s=1),g.get_oauth_url({platform:s}).then(function(t){0===t.data.code&&(localStorage.clear(),_.delCookie("session"),location.href=t.data.data.url)}).catch(function(t){console.log("登录接口请求error:"+o()(t))})):null==_.getCookie("session")||void 0===_.getCookie("session")||_.setCookie("session",_.getCookie("session"),30),t},function(t){return r.a.reject(t)});var f=function(t,s,e){return c()({url:t,method:s,data:e})},p=function(t,s,e){m()(t,e,s)},v=g,x={data:function(){return{props:""}},computed:{ishow:function(){return this.props=this.$store.state.map.toast_config.content,this.$store.state.map.toast_config.flag}},updated:function(){var t=this;setTimeout(function(){t.$store.state.map.toast_config.flag=!1},t.$store.state.map.toast_config.time)}},C={render:function(){var t=this.$createElement,s=this._self._c||t;return this.ishow?s("div",{staticClass:"module-mask"},[s("div",{staticClass:"toast"},[this._v(this._s(this.props))])]):this._e()},staticRenderFns:[]},k=e("/Xao")(x,C,!1,function(t){e("gG2Y")},"data-v-4f485241",null).exports,y={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"alert layout col"},[e("div",{staticClass:"box col all-center"},[t._v(t._s(t.text))]),t._v(" "),e("div",{staticClass:"btns layout row one-halfPx-Top"},[t.btnshow?e("div",{staticClass:"cancle row all-center one-halfPx-Right",on:{click:function(s){s.stopPropagation(),t.cancle(s)}}},[t._v(t._s(t.cancleText))]):t._e(),t._v(" "),e("div",{staticClass:"sure row all-center",on:{click:function(s){s.stopPropagation(),t.sure(s)}}},[t._v(t._s(t.sureText))])])])},staticRenderFns:[]},T=e("/Xao")({name:"alert",data:function(){return{text:"",cancleText:"取消",sureText:"确定",btnshow:!0}},methods:{cancle:function(){this.$store.state.showMask.mask.ishow_mask=!1,this.$store.state.showMask.mask.ishow_alert=!1},sure:function(){var t=this,s=null;if(s=t.$store.state.showMask.mask.saveText,t.$store.state.showMask.alert.repeat)return t.$store.state.showMask.alert.repeatCallBack(function(){}),t.$store.state.showMask.mask.ishow_alert=!1,!1;if(t.$store.state.showMask.mask.ishow_mask=!1,t.$store.state.showMask.mask.ishow_alert=!1,t.$store.state.showMask.mask.saveText){var e=function(e,i){s[e]?t[e]=s[e]:t[e]=i};t.text=s.content,t.$store.state.showMask.alert.btnNum=s.btnNum,e("cancleText","取消"),e("sureText","确定")}t.$store.state.showMask.mask.ishow_mask=!1}},mounted:function(){this.text=this.$store.state.showMask.alert.content,this.$store.state.showMask.alert.cancleText&&(this.cancleText=this.$store.state.showMask.alert.cancleText),this.$store.state.showMask.alert.sureText&&(this.sureText=this.$store.state.showMask.alert.sureText)},updated:function(){this.btnshow=2===this.$store.state.showMask.alert.btnNum}},y,!1,function(t){e("hqUG")},null,null).exports,b={render:function(){this.$createElement;this._self._c;return this._m(0,!1,!1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"web-component-loading"},[s("div",{staticClass:"loading layout all-center"},[s("img",{attrs:{src:"/images/svg/Spinner.svg"}})])])}]},P={name:"web-component-loading",data:function(){return{}},computed:{show_loading:function(){return this.$store.state.showMask.loader.show_loading},show_loaderTip:function(){return this.$store.state.showMask.loader.show_loaderTip}},components:{loading:e("/Xao")({name:"web-component-loading",data:function(){return{}}},b,!1,function(t){e("0him")},null,null).exports}},$={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"web-component-loading"},[s("div",{staticClass:"loader"},[s("img",{attrs:{src:"/images/loading.png"}}),this._v(" "),this.show_loaderTip?s("div",{staticClass:"tip"},[s("div",{staticClass:"text"},[this._v("感谢使用大地走红！")]),this._v(" "),s("div",[this._v("点击左上角关闭页面")])]):this._e()]),this._v(" "),this.show_loading?s("loading"):this._e()],1)},staticRenderFns:[]},U={render:function(){var t=this.$createElement,s=this._self._c||t;return this.ishow?s("div",{staticClass:"LoaderCircle"},[s("div",{staticClass:"loader"})]):this._e()},staticRenderFns:[]},M={name:"mask",data:function(){return{text:"<div>asdasdassad</div>"}},components:{oAlert:T,loader:e("/Xao")(P,$,!1,function(t){e("Ol+B")},null,null).exports,loaderCircle:e("/Xao")({name:"LoaderCircle",data:function(){return{ishow:!0}},computed:{}},U,!1,function(t){e("pN4k")},null,null).exports},methods:{hide:function(){if(0==this.$store.state.showMask.mask.not_click)return!1;this.$store.state.showMask.mask.ishow_mask=!1,this.$store.state.showMask.mask.ishow_alert&&(this.$store.state.showMask.mask.ishow_alert=!1)}},computed:{ishow_mask:function(){this.$store.state.showMask.alert.repeat;return this.$store.state.showMask.mask.ishow_mask},ishow_Html:function(){return this.$store.state.showMask.mask.ishow_Html},ishow_alert:function(){this.$store.state.showMask.alert.repeat;return this.$store.state.showMask.mask.ishow_alert},ishow_loader:function(){return this.$store.state.showMask.mask.ishow_loader},ishow_loaderCircle:function(){return this.$store.state.showMask.mask.ishow_loaderCircle},ishow_qr:function(){return this.$store.state.showMask.mask.ishow_qr}}},D={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.ishow_mask,expression:"ishow_mask"}],staticClass:"mask",on:{click:function(s){s.stopPropagation(),t.hide(s)}}},[t.ishow_alert?e("oAlert"):t._e(),t._v(" "),t.ishow_loader?e("loader"):t._e(),t._v(" "),t.ishow_loaderCircle?e("loaderCircle"):t._e(),t._v(" "),t.ishow_Html?e("div",{attrs:{id:"htmlText"},domProps:{innerHTML:t._s(t.text)}}):t._e(),t._v(" "),t.ishow_qr?e("div",{staticClass:"qr"},[e("div",{staticClass:"qrTitle"},[t._v("您未关注公众号")]),t._v(" "),e("img",{attrs:{src:"/images/WeChat.jpg",alt:""}}),t._v(" "),e("div",{staticClass:"qrText"},[t._v("长按识别二维码关注公众号")])]):t._e()],1)},staticRenderFns:[]},N={name:"app",data:function(){return{ishowContent:!1}},watch:{$route:function(t,s){var e="oneKeyUse"==t.name&&"afterPay"==s.name&&!1===this.$store.state.html.router,i="afterPay"==t.name&&"oneKeyUse"==s.name&&!0===this.$store.state.html.router;(e||i)&&(this.ishowContent=!1,_.CloseWindow())}},mounted:function(){var t=this,s=(location.href,window.location.href.split("user")[0]);if(console.log("URL:"+s),t.$store.state.html.url=s,t.ishowContent=!1,"true"===localStorage.getItem("tozhima")&&"oneKeyUse"===routerName)return localStorage.setItem("tozhima","false"),_.CloseWindow();t.session(function(){t.ishowContent=!0,t.$store.state.showMask.mask={ishow_mask:!1,ishow_loaderCircle:!1,not_click:!0}})},components:{oMask:e("/Xao")(M,D,!1,function(t){e("wurl")},null,null).exports,toast:k},methods:{session:function(t){var s=0,e=window.location.href.split("#/")[0];_.setCookie("target_url",e,30),this.$store.state.showMask.mask={ishow_mask:!0,ishow_loaderCircle:!0,not_click:!1},console.log("target_url:"+_.getCookie("target_url")),console.log("session:"+_.getCookie("session")),null!=_.getCookie("session")?v.get_wechat_jsapi({session:_.getCookie("session"),url:e}).then(function(s){0===s.data.code&&(0===s.data.data.length?_.startSDK("",t):_.startSDK(s.data.data,t))}).catch(function(t){console.log("appid_error:"+o()(t))}):(_.isWeiXin()?s=0:_.isAlipay()&&(s=1),v.get_oauth_url({platform:s}).then(function(t){0==t.data.code&&(location.href=t.data.data.url)}).catch(function(t){}))}}},S={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[this.ishowContent?s("div",{attrs:{id:"routerView"}},[s("router-view")],1):this._e(),this._v(" "),s("oMask"),this._v(" "),s("toast")],1)},staticRenderFns:[]},F=e("/Xao")(N,S,!1,function(t){e("K6wR")},null,null).exports,z=e("zO6J"),A=function(t){document.title=t},R={name:"userFlow",data:function(){return{imgUrl_001:"/images/useFlow/1.0@2x.png",imgUrl_002:"/images/useFlow/next1@2x.png",imgUrl_003:"/images/useFlow/next3@2x.png",imgUrl_004:"/images/useFlow/3.1@2x.png",imgUrl_005:"/images/useFlow/2.0@2x.png",imgUrl_006:"/images/useFlow/next1@2x.png",imgUrl_007:"/images/useFlow/4.0@2x.png",imgUrl_008:"/images/useFlow/5.0@2x.png",imgUrl_009:"/images/useFlow/next1@2x.png",imgUrl_010:"/images/useFlow/next3@2x.png",imgUrl_011:"/images/useFlow/6.0@2x.png",imgUrl_012:"/images/useFlow/7.0@2x.png"}},methods:{},mounted:function(){A("使用帮助")}},E={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"userFlow"},[s("div",{staticClass:"view layout col"},[this._m(0,!1,!1),this._v(" "),s("div",{staticClass:"col box"},[s("div",{staticClass:"content layout col"},[s("div",{staticClass:"col"},[s("div",{staticClass:"row"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_001,expression:"imgUrl_001"}],staticClass:"img1"})]),this._v(" "),s("div",{staticClass:"row lrb-center"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_002,expression:"imgUrl_002"}],staticClass:"img2"})]),this._v(" "),s("div",{staticClass:"row"})]),this._v(" "),s("div",{staticClass:"col"},[s("div",{staticClass:"row"}),this._v(" "),s("div",{staticClass:"row lrb-center"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_003,expression:"imgUrl_003"}],staticClass:"img2"})]),this._v(" "),s("div",{staticClass:"row"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_004,expression:"imgUrl_004"}],staticClass:"img1"})])]),this._v(" "),s("div",{staticClass:"col"},[s("div",{staticClass:"row"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_005,expression:"imgUrl_005"}],staticClass:"img1"})]),this._v(" "),s("div",{staticClass:"row lrb-center"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_006,expression:"imgUrl_006"}],staticClass:"img2"})]),this._v(" "),s("div",{staticClass:"row"})]),this._v(" "),s("div",{staticClass:"col"},[s("div",{staticClass:"row"}),this._v(" "),s("div",{staticClass:"row lrb-center"}),this._v(" "),s("div",{staticClass:"row"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_007,expression:"imgUrl_007"}],staticClass:"img1"})])])])])]),this._v(" "),s("div",{staticClass:"view layout col"},[this._m(1,!1,!1),this._v(" "),s("div",{staticClass:"col box"},[s("div",{staticClass:"content layout col"},[s("div",{staticClass:"col"},[s("div",{staticClass:"row"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_008,expression:"imgUrl_008"}],staticClass:"img1"})]),this._v(" "),s("div",{staticClass:"row lrb-center"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_009,expression:"imgUrl_009"}],staticClass:"img2"})]),this._v(" "),s("div",{staticClass:"row"})]),this._v(" "),s("div",{staticClass:"col"},[s("div",{staticClass:"row"}),this._v(" "),s("div",{staticClass:"row lrb-center"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_010,expression:"imgUrl_010"}],staticClass:"img2"})]),this._v(" "),s("div",{staticClass:"row"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_011,expression:"imgUrl_011"}],staticClass:"img1"})])]),this._v(" "),s("div",{staticClass:"col"},[s("div",{staticClass:"row"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:this.imgUrl_012,expression:"imgUrl_012"}],staticClass:"img1"})]),this._v(" "),s("div",{staticClass:"row lrb-center"}),this._v(" "),s("div",{staticClass:"row"})]),this._v(" "),this._m(2,!1,!1)])])])])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"title"},[s("span",[this._v("借伞")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"title"},[s("span",[this._v("还伞")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"col"},[s("div",{staticClass:"row"}),this._v(" "),s("div",{staticClass:"row lrb-center"}),this._v(" "),s("div",{staticClass:"row"})])}]},I=e("/Xao")(R,E,!1,function(t){e("OLZg")},null,null).exports,L={name:"afterPay",data:function(){return{lists:[],phone:"tel:4008267388",phoneText:"400-826-7388",fixedText:{text:"如果您需要其他帮助，欢迎致电客服",ishowPhone:!0},scanData:{},btnNum:0,ishowContent:!0,orderid:""}},components:{userFlow:I},mounted:function(){var t=location.href;if(t=t.split("#")[0].split("?")[1],this.orderid=_.strtoJson(t).orderid,this.orderid)this.scanData.fee_strategy=localStorage.getItem("fee_str");else{if(this.scanData=this.$route.params.scanData,void 0===this.$route.params.orderid){var s=this.$store.state.html.url;window.location.href=s+"user/center#/userHome"}this.orderid=this.$route.params.orderid}this.show_sending()},methods:{btnTap:function(t){switch(t){case 2:this.$store.state.html.oneKeyUseRouter=!0,this.$store.state.html.router=!0,this.$router.replace("oneKeyUse");break;case 3:this.ishow=!0,this.ishowContent=!1;break;case 4:var s=this.$store.state.html.url;window.location.href=s+"user/center#/userHome";break;case 5:this.ishowContent=!1,this.$store.state.html.router=!0,this.$router.replace("oneKeyUse");break;case 6:var e=this.$store.state.html.url;window.location.href=e+"user/map#/map"}},show_notOnline:function(){this.imgPath="/images/one_key_use/notonline@2x.png",this.solution="请扫描其他伞柜",this.stateText="伞柜不在线",this.btnText="扫码其他伞柜",this.lists=[{text:"伞柜发生断网断电故障，给您带来的便深感抱歉",ishowPhone:!1},this.fixedText]},show_occupation:function(){this.imgPath="/images/one_key_use/occupation@2x.png",this.stateText="请稍候",this.solution="伞柜正被其他用户使用",this.btnText="点击重试",this.btnNum=2,this.lists=[{text:"伞柜同一时间内仅支持一位用户借伞，其他用户操作完成后您才可以进行借伞操作给您带来的不便深感抱歉",ishowPhone:!1},this.fixedText]},show_noHasUse:function(){this.imgPath="/images/one_key_use/san@2x.png",this.stateText="当前伞柜",this.solution="没有可用的伞",this.btnText="扫码其他伞柜",this.lists=[{text:"伞柜中仅存故障伞或伞已全部借出，给您带来的便深感抱歉",ishowPhone:!1},this.fixedText]},show_recharge:function(){this.imgPath="/images/one_key_use/recharge@2x.png",this.stateText="账户余额18元",this.solution="需预存12元才能借伞",this.btnText="立即充值",this.lists=[{text:"借伞时，需支付30元押金，当钱包余额大于等于30元时，自动把30元余额转为押金",ishowPhone:!1},{text:"还伞后，从押金中扣除用伞费用（1元/12小时），并自动将剩余押金转为余额",ishowPhone:!1},this.fixedText]},show_sending:function(){A("系统确认中");var t=this;this.imgPath="/images/one_key_use/waiting.gif",this.stateText="请稍候",this.solution="系统确认中",this.btnText="",this.lists=[{text:"当伞槽绿灯闪烁时，取出大地走红共享伞",ishowPhone:!1},{text:"如借伞失败，押金将自动转为余额，可直接提现",ishowPhone:!1},{text:"借伞收费"+t.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},t.fixedText];var s=0;localStorage.setItem("tozhima","false");var e=setInterval(function(){v.order_status({session:_.getCookie("session"),order_id:t.orderid}).then(function(i){s+=1,0==i.data.data.status?(alert("订单未支付成功！"),_.CloseWindow()):1==i.data.data.status?(A("正在出伞"),t.solution="正在出伞"):3==i.data.data.status?t.show_hasSend(i.data.data):4==i.data.data.status?(s=0,clearInterval(e),t.show_takeFail()):2==i.data.data.status?(clearInterval(e),t.show_takeSuccess()):6==i.data.data.status?(clearInterval(e),t.show_occupation()):5==i.data.data.status?(clearInterval(e),t.show_noResponse()):7==i.data.data.status&&(clearInterval(e),_.CloseWindow())}).catch(function(t){})},1e3)},show_hasSend:function(t,s){this.imgPath="/images/one_key_use/waiting.gif",this.stateText="请取伞",this.solution=t.slot+"号槽伞已出",this.btnText="",this.lists=[{text:"当伞槽绿灯闪烁时，取出大地走红共享伞",ishowPhone:!1},{text:"如借伞失败，押金将自动转为余额，可直接提现",ishowPhone:!1},{text:"借伞收费"+this.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},this.fixedText]},show_takeSuccess:function(){A("大地走红");this.imgPath="/images/one_key_use/success@2x.png",this.stateText="感谢您的使用",this.solution="取伞成功",this.btnText="了解还伞流程",this.btnNum=3,this.lists=[{text:"请检查伞是否可用，如发现伞已损坏，请在两分钟内将伞归还，不产生任何费用",ishowPhone:!1},{text:"借伞收费"+this.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},this.fixedText]},show_takeFail:function(){A("大地走红");this.imgPath="/images/one_key_use/fail@2x.png",this.stateText="请在有效的时间内取伞",this.solution="取伞失败",this.btnText="返回用户中心",this.btnText2="继续借伞",this.btnNum=4,this.btnNum2=5,this.lists=[{text:"请检查伞是否可用，如发现伞已损坏，请在两分钟内将伞归还，不产生任何费用",ishowPhone:!1},{text:"借伞收费"+this.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},this.fixedText]},show_noResponse:function(){A("出伞失败");this.imgPath="/images/one_key_use/fail@2x.png",this.stateText="设备无响应",this.solution="出伞失败",this.btnText="返回用户中心",this.btnText2="附近网点",this.btnNum=4,this.btnNum2=6,this.lists=[{text:"请检查伞是否可用，如发现伞已损坏，请在两分钟内将伞归还，不产生任何费用",ishowPhone:!1},{text:"借伞收费"+this.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},this.fixedText]}}},q={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"oneKeyUse"},[t.ishowContent?e("div",{staticClass:"content layout col"},[e("div",{staticClass:"header"},[e("div",{staticClass:"box layout col tb-center"},[e("img",{staticClass:"tip-icon",attrs:{src:t.imgPath}}),t._v(" "),e("div",{staticClass:"state"},[t._v(t._s(t.stateText))]),t._v(" "),e("div",{staticClass:"solution"},[t._v(t._s(t.solution))])]),t._v(" "),e("div",{staticClass:"btns layout lr-center"},[t.btnText2?e("div",{staticClass:"btn marginRight"},[e("div",{staticClass:"btn layout all-center",on:{click:function(s){t.btnTap(t.btnNum2)}}},[t._v(t._s(t.btnText2))])]):t._e(),t._v(" "),t.btnText?e("div",{staticClass:"btn"},[e("div",{staticClass:"btn layout all-center",on:{click:function(s){t.btnTap(t.btnNum)}}},[t._v(t._s(t.btnText))])]):t._e()])]),t._v(" "),e("div",{staticClass:"footer col"},[e("div",{staticClass:"tips"},[t._m(0,!1,!1),t._v(" "),e("ol",t._l(t.lists,function(s,i){return e("li",{key:i},[t._v("\n            "+t._s(s.text)+"\n            "),s.ishowPhone?e("a",{attrs:{href:t.phone}},[t._v(t._s(t.phoneText))]):t._e()])}))])])]):t._e(),t._v(" "),t.ishow?e("userFlow"):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"title"},[s("div",{staticClass:"titleLine"}),s("span",[this._v("温馨提示")])])}]},K=e("/Xao")(L,q,!1,function(t){e("Xo9O")},null,null).exports,X={name:"oneKeyUse",data:function(){return{lists:[],ishowContent:!1,phone:"tel:400-826-7388",phoneText:"400-826-7388",payType:"",fixedText:{text:"如果您需要其他帮助，欢迎致电客服",ishowPhone:!0},btnNum:0,scanData:"",order_id:"",qrcode:"",name:"大地走红共享伞"}},mounted:function(){A("大地走红");var t=location.href,s="",e="";t.indexOf("qrcode")>-1&&t.indexOf("flag")>-1?(t=t.split("?")[1].split("#")[0],s=_.strtoJson(t).flag,e=_.strtoJson(t).qrcode):s=0;!1===this.$store.state.html.oneKeyUseRouter?(this.$store.state.showMask.loader.show_loaderTip=!1,this.$store.state.showMask.loader.show_loading=!0,1==s?(localStorage.setItem("tozhima","false"),this.showContent(e)):(this.$store.state.showMask.mask={ishow_mask:!0,ishow_loader:!0,not_click:!1},this.rescanFn(function(){}))):this.showContent(localStorage.getItem("wechatqrcode"))},methods:{rescanFn:function(t){var s=this;setTimeout(function(){s.$store.state.showMask.loader.show_loading=!1,s.$store.state.showMask.loader.show_loaderTip=!0},600),_.scan(function(e){s.showContent(e),t()})},showContent:function(t){var s=this;if(localStorage.setItem("wechatqrcode",t),!t)return!1;var e=this;e.qrcode=t,v.get_stationInfo({session:_.getCookie("session"),qrcode:t}).then(function(t){if(e.$store.state.showMask.mask={ishow_mask:!1,ishow_loader:!1},localStorage.setItem("fee_str",t.data.data.fee_strategy),t.data.data.url)return localStorage.setItem("tozhima","true"),s.ishowContent=!1,location.href=t.data.data.url,!1;switch(e.scanData=t.data.data,t.data.code){case 0:e.show_recharge();break;case 2:e.show_notOnline();break;case 4:e.show_occupation();break;case 3:e.show_noHasUse();break;case 5.1:e.show_sending();break;case 6:e.show_hasSend();break;case 7:e.show_takeSuccess();break;case 8:e.show_takeFail();break;case 9:e.show_noResponse();break;case 555:return alert("二维码错误！"),_.CloseWindow(),!1}s.ishowContent=!0}).catch(function(t){})},btnTap:function(t){var s=this;_.btnClickLimit(function(e){if(!e)return console.log("限制点击le"),!1;var i=function(){v.paydirect({session:_.getCookie("session"),stationid:s.scanData.sid}).then(function(t){0==t.data.code?(s.order_id=t.data.data.orderid,0==t.data.data.paytype?_.pay(t.data.data,function(e){e?document.write(e):s.$router.push({name:"afterPay",params:{scanData:s.scanData,orderid:t.data.data.orderid}})}):(s.$store.state.html.router=!1,s.ishowContent=!1,s.$router.push({name:"afterPay",params:{scanData:s.scanData,orderid:t.data.data.orderid,qrcode:s.qrcode}}))):2==t.data.code&&(s.$store.state.showMask.mask={ishow_mask:!0,ishow_alert:!0},s.$store.state.showMask.alert={content:"设备仍在使用中，请稍后再试!",sureText:"OK",btnNum:1})}).catch(function(t){})},a=0,o=(new Date).getTime();if("undefined"!=a&&o-a<500)return!1;if(a=o,1===t)s.rescanFn(function(){});else if(2===t)s.showContent(),i();else{if(3===t)return s.ishow=!0,s.ishowContent=!1,!1;0===t&&i()}void 0===s.scanData.isZhima&&(s.scanData.isZhima="")})},show_recharge:function(){this.imgPath="/images/one_key_use/recharge@2x.png",this.stateText="账户余额"+this.scanData.usable_money+"元",0===this.scanData.need_pay?this.solution="钱包余额充足":this.solution="需预存"+this.scanData.need_pay+"元才能借伞",0===this.scanData.need_pay?this.btnText="立即借伞":(this.btnText="立即充值",A("充值")),this.btnNum=0,this.lists=[{text:"借伞时，需支付"+this.scanData.deposit_need+"元押金，当钱包余额大于等于"+this.scanData.deposit_need+"元时，自动把"+this.scanData.deposit_need+"元余额转为押金",ishowPhone:!1},{text:"还伞后，从押金中扣除用伞费用（"+this.scanData.fee_strategy+"），并自动将剩余押金转为余额",ishowPhone:!1},this.fixedText]},show_notOnline:function(){this.imgPath="/images/one_key_use/notonline@2x.png",this.solution="请扫描其他伞柜",this.stateText="伞柜不在线",this.btnText="扫码其他伞柜",this.btnNum=1,this.lists=[{text:"伞柜发生断网断电故障，给您带来的不便深感抱歉",ishowPhone:!1},this.fixedText]},show_occupation:function(){this.imgPath="/images/one_key_use/occupation@2x.png",this.stateText="请稍候",this.solution="伞柜正被其他用户使用",this.btnText="点击重试",this.btnNum=2,this.lists=[{text:"伞柜同一时间内仅支持一位用户借伞，其他用户操作完成后您才可以进行借伞操作给您带来的不便深感抱歉",ishowPhone:!1},this.fixedText]},show_noHasUse:function(){this.imgPath="/images/one_key_use/san@2x.png",this.stateText="当前伞柜",this.solution="没有可用的伞",this.btnText="扫码其他伞柜",this.btnNum=1,this.lists=[{text:"伞柜中仅存故障伞或伞已全部借出，给您带来的便深感抱歉",ishowPhone:!1},this.fixedText]},show_sending:function(){var t=this;this.imgPath="/images/one_key_use/waiting.gif",this.stateText="请稍候",this.solution="正在出伞",this.btnText="",this.lists=[{text:"当伞槽绿灯闪烁时，取出"+this.name,ishowPhone:!1},{text:"如借伞失败，押金将自动转为余额，可直接提现",ishowPhone:!1},{text:"借伞收费"+t.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},t.fixedText];var s=0,e=setInterval(function(){v.order_status({session:_.getCookie("session"),order_id:t.order_id}).then(function(i){s+=1,1==i.data.data.status||(5==i.data.data.status?t.show_hasSend(i.data.data):99==i.data.data.status?(s=0,clearInterval(e),t.show_takeFail()):2==i.data.data.status?(clearInterval(e),t.show_takeSuccess()):65==i.data.data.status?(clearInterval(e),t.show_occupation()):(clearInterval(e),t.show_noResponse()))}).catch(function(t){})},1e3)},show_hasSend:function(t,s){console.log("显示取伞");this.imgPath="/images/one_key_use/waiting.gif",this.stateText="请取伞",this.solution=t.slot+"号槽伞已出",this.btnText="",this.lists=[{text:"当伞槽绿灯闪烁时，取出"+this.name,ishowPhone:!1},{text:"如借伞失败，押金将自动转为余额，可直接提现",ishowPhone:!1},{text:"借伞收费"+this.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},this.fixedText]},show_takeSuccess:function(){console.log("显示取伞成功");this.imgPath="/images/one_key_use/success@2x.png",this.stateText="感谢您的使用",this.solution="取伞成功",this.btnText="了解还伞流程",this.btnNum=3,this.lists=[{text:"请检查伞是否可用，如发现伞已损坏，请在两分钟内将伞归还，不产生任何费用",ishowPhone:!1},{text:"借伞收费"+this.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},{text:"若15天内未还伞，系统将自动判定为伞已遗失，会从押金中扣减费用"+this.scanData.deposit_need+"元",ishowPhone:!1},this.fixedText]},show_takeFail:function(){console.log("显示取伞失败");this.imgPath="/images/one_key_use/fail@2x.png",this.stateText="请在有效的时间内取伞",this.solution="取伞失败",this.btnText="了解还伞流程",this.btnNum=3,this.lists=[{text:"请检查伞是否可用，如发现伞已损坏，请在两分钟内将伞归还，不产生任何费用",ishowPhone:!1},{text:"借伞收费"+this.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},{text:"若15天内未还伞，系统将自动判定为伞已遗失，会从押金中扣减费用"+this.scanData.deposit_need+"元",ishowPhone:!1},this.fixedText]},show_noResponse:function(){console.log("显示设备无响应");this.imgPath="/images/one_key_use/fail@2x.png",this.stateText="设备无响应",this.solution="出伞失败",this.btnText="了解还伞流程",this.btnNum=3,this.lists=[{text:"请检查伞是否可用，如发现伞已损坏，请在两分钟内将伞归还，不产生任何费用",ishowPhone:!1},{text:"借伞收费"+this.scanData.fee_strategy+"，费用会从押金中扣减",ishowPhone:!1},{text:"若15天内未还伞，系统将自动判定为伞已遗失，会从押金中扣减费用"+this.scanData.deposit_need+"元",ishowPhone:!1},this.fixedText]}}},H={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"oneKeyUse"},[t.ishowContent?e("div",{staticClass:"content layout col"},[e("div",{staticClass:"header"},[e("div",{staticClass:"box layout col tb-center"},[e("img",{staticClass:"tip-icon",attrs:{src:t.imgPath}}),t._v(" "),e("div",{staticClass:"state"},[t._v(t._s(t.stateText))]),t._v(" "),e("div",{staticClass:"solution"},[t._v(t._s(t.solution))])]),t._v(" "),e("div",{staticClass:"btns layout lr-center"},[t.btnText?e("div",{staticClass:"btn"},[e("div",{staticClass:"btn layout all-center",on:{click:function(s){t.btnTap(t.btnNum)}}},[t._v(t._s(t.btnText))])]):t._e()])]),t._v(" "),e("div",{staticClass:"footer col"},[e("div",{staticClass:"tips"},[t._m(0,!1,!1),t._v(" "),e("ol",t._l(t.lists,function(s,i){return e("li",{key:i},[t._v("\n            "+t._s(s.text)+"\n            "),s.ishowPhone?e("a",{attrs:{href:t.phone}},[t._v(t._s(t.phoneText))]):t._e()])}))])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"title"},[s("div",{staticClass:"titleLine"}),s("span",[this._v("温馨提示")])])}]},W=e("/Xao")(X,H,!1,function(t){e("6Lm9")},null,null).exports,j=location.href,O=j.split("?")[1],J=_.strtoJson(O).orderid;J&&(location.href=j.split("?")[0]+"?orderid="+J+"#/afterPay");var B=_.strtoJson(O).router,G={path:"/",redirect:"/oneKeyUse"};null!=B&&(G.redirect="/"+B),i.a.use(z.a);var V=new z.a({routes:[{path:"/oneKeyUse",name:"oneKeyUse",component:W},{path:"/useFlow",name:"useFlow",component:I},{path:"/afterPay",name:"afterPay",component:K},G]}),Z=e("9rMa"),Y={state:{session:"",platform:0,appid:"",debug:{debugShow:!0,debugTextList:[]},router:!1,oneKeyUseRouter:!1,scrollTop:0,noDoConfig:!0,url:""}},Q={state:{scan_result:""}},tt={state:{mask:{ishow_mask:!1,ishow_alert:!1,ishow_loader:!1,ishow_loaderCircle:!1,ishow_Html:!1,ishow_qr:!1,htmlText:"",saveText:null,not_click:!0},alert:{content:"",cancleText:"",sureText:"",btnNum:null,repeat:null,repeatCallBack:null},loader:{show_loading:!1,show_loaderTip:!1}}},st={state:{reload:0,stations:"",mapStations:"",stationsLength:"",stationsKey:"",stationsLengthKey:"",inputValue:"",inputKeyWord:"",init_point:"",swiperFalt:!1,ifDistance:!0,ifList:!1,toast_config:{content:"",time:2e3,flag:!1},loader_config:{flag:!1}}};i.a.use(Z.a);var et=new Z.a.Store({modules:{html:Y,scan:Q,showMask:tt,map:st}}),it=e("201h"),at=e.n(it);i.a.config.productionTip=!1,i.a.use(at.a,{preLoad:1,error:"./images/svg/error_img.svg",loading:"./images/svg/loading_img.svg",attempt:5}),new i.a({el:"#app",router:V,store:et,template:"<App/>",components:{App:F}})},OLZg:function(t,s){},"Ol+B":function(t,s){},Xo9O:function(t,s){},gG2Y:function(t,s){},hqUG:function(t,s){},pN4k:function(t,s){},wurl:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.6f4a260a649979ca5633.js.map